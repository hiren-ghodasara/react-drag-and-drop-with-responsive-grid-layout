(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){e.exports=a(228)},131:function(e,t,a){},135:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(2),o=a.n(r),l=(a(131),a(65)),s=a.n(l),d=a(100),c=a(101),m=a(102),p=a(123),g=a(103),u=a(124),h=a(122),f=a(28),b=a(230),v=a(231),x=a(104),w=a.n(x),y=(a(134),a(135),{list1:[{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286429/fixImg/1_10_yt0pdq.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286427/fixImg/1_9_m64axr.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286427/fixImg/1_12_bqcmav.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286427/fixImg/1_13_xvkoly.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286427/fixImg/1_11_lamq5j.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286427/fixImg/1_6_ecjwnm.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286426/fixImg/1_7_lpoao6.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286426/fixImg/1_8_ghojgb.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286426/fixImg/1_1_mvrxw1.png"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286426/fixImg/1_5_gvde1y.jpg"},{id:Math.random(),imgUrl:"https://res.cloudinary.com/dgxpqt1hz/image/upload/v1556286426/fixImg/1_1_liocpx.jpg"}],list2:[]}),C=function(e){return{background:e?"#563d7b26":"#fff",padding:8}},E=function(e,t,a,n){var i=Array.from(e),r=Array.from(t),o=i.splice(a.index,1),l=Object(h.a)(o,1)[0];console.log("destination",t.length),r.splice(t.length,0,l);var s={};return s[a.droppableId]=i,s[n.droppableId]=r,s},I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={itemsCol1:y.list1,itemsCol2:y.list2,visible:!1,loading:!1,src:null,crop:{aspect:16/9,width:100,height:100,x:50,y:50}},a.id2List={droppable1:"itemsCol1",droppable2:"itemsCol2"},a.getList=function(e){return a.state[a.id2List[e]]},a.onDragEnd=function(e){var t=e.source,n=e.destination;if(n&&t.droppableId!==n.droppableId){var i=E(a.getList(t.droppableId),a.getList(n.droppableId),t,n);a.setState({itemsCol1:i.droppable1,itemsCol2:i.droppable2})}},a.onSelectFile=function(e){e.target.files&&e.target.files.length>0&&a.uploadFileToCloudinary(e.target.files[0],"droppable1")},a.onImageLoaded=function(e,t){a.imageRef=e},a.onCropComplete=function(e){a.makeClientCrop(e)},a.onCropChange=function(e){a.setState({crop:e})},a.handleOk=function(e){a.uploadFileToCloudinary(a.state.blobImgData,"droppable2")},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"makeClientCrop",value:function(){var e=Object(d.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:a=e.sent,this.setState({croppedImageUrl:a.url,blobImgData:a.blobData});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=this,i=document.createElement("canvas"),r=e.naturalWidth/e.width,o=e.naturalHeight/e.height;return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(e,t.x*r,t.y*o,t.width*r,t.height*o,0,0,t.width,t.height),new Promise(function(e,t){i.toBlob(function(t){t?(t.name=a,window.URL.revokeObjectURL(n.fileUrl),n.fileUrl=window.URL.createObjectURL(t),e({url:n.fileUrl,blobData:t})):console.error("Canvas is empty")},"image/jpeg")})}},{key:"uploadFileToCloudinary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"droppable1",a="https://api.cloudinary.com/v1_1/".concat("dgxpqt1hz","/upload"),n=new XMLHttpRequest,i=new FormData,r=this;this.setState({loading:!0}),n.open("POST",a,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.upload.addEventListener("progress",function(e){console.log("fileuploadprogress data.loaded: ".concat(e.loaded,",data.total: ").concat(e.total))}),n.onreadystatechange=function(e){if(4===n.readyState&&200===n.status){var a=JSON.parse(n.responseText);a.url&&(r.state[r.id2List[t]].push({id:Math.random(),imgUrl:a.url}),r.setState({visible:!1,loading:!1}))}},i.append("upload_preset","ml_default"),i.append("tags","browser_upload"),i.append("file",e),i.append("folder","images"),n.send(i)}},{key:"_handleDoubleClickItem",value:function(e){var t=this,a=new XMLHttpRequest;a.open("GET",e.imgUrl),a.responseType="blob",a.onload=function(e){var a=(window.URL||window.webkitURL).createObjectURL(this.response);t.setState({src:a,visible:!0})},a.send()}},{key:"render",value:function(){var e=this,t=this.state,a=t.crop,n=t.croppedImageUrl,r=t.src;return i.a.createElement("div",{className:"App"},i.a.createElement("nav",{className:"navbar navbar-dark bg-dark text-center"},i.a.createElement("span",{className:"navbar-brand mb-0 h1 mx-auto"},"React Drag And Drop With Responsive Grid Layout (React Beautiful DND)")),i.a.createElement(b.a,{spinning:this.state.loading},i.a.createElement("div",{className:"container-fluid"},i.a.createElement(f.a,{onDragEnd:this.onDragEnd},i.a.createElement("div",{className:"row mt-2"},i.a.createElement("div",{className:"col-lg-12 col-xs-12 mb-2"},i.a.createElement("div",{className:"file-up btn btn-outline-primary"},"Add New Image",i.a.createElement("input",{type:"file",onChange:this.onSelectFile}))),i.a.createElement(f.c,{droppableId:"droppable1"},function(t,a){return i.a.createElement("div",{className:"col-lg-6 col-xs-12 pr-2",ref:t.innerRef},i.a.createElement("div",{className:"grid-list-container",style:C(a.isDraggingOver)},i.a.createElement("ul",{className:"actul-img-left"},e.state.itemsCol1.map(function(t,a){return i.a.createElement(f.b,{key:t.id,draggableId:t.id,index:a},function(a,n){return i.a.createElement("li",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{onDoubleClick:function(){return e._handleDoubleClickItem(t)}}),i.a.createElement("img",{alt:"img-alr",className:"image-item img-zom",src:t.imgUrl}))})}),t.placeholder)))}),i.a.createElement(f.c,{droppableId:"droppable2"},function(t,a){return i.a.createElement("div",{className:"col-lg-6 col-xs-12 pl-2",ref:t.innerRef},i.a.createElement("div",{className:"grid-list-container",style:C(a.isDraggingOver)},i.a.createElement("ul",{className:"row resize-image no-gutters"},e.state.itemsCol2.map(function(e,t){return i.a.createElement(f.b,{key:e.id,draggableId:e.id,index:t},function(t,a){return i.a.createElement("li",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{className:"col-6 col-md-5 col-lg-4"}),i.a.createElement("img",{alt:"img-alr",className:"image-item",src:e.imgUrl}))})}),t.placeholder)))}))))),i.a.createElement(v.a,{visible:this.state.visible,style:{top:17},title:"Crop Image",onOk:this.handleOk,width:1200,onCancel:this.handleCancel}," ",i.a.createElement(b.a,{spinning:this.state.loading},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-xs-12 crop-ele d-flex justify-content-center align-items-center"},r&&i.a.createElement(w.a,{src:r,crop:a,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange})),i.a.createElement("div",{className:"col-lg-6 col-xs-12 preview-ele d-flex justify-content-center align-items-center"},n&&i.a.createElement("img",{alt:"Crop",style:{maxWidth:"100%",width:"80%"},src:n}))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[126,1,2]]]);
//# sourceMappingURL=main.56176605.chunk.js.map